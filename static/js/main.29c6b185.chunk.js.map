{"version":3,"sources":["agent.js","reducers/home.js","constants/actionTypes.js","reducer.js","middleware.js","store.js","components/root.jsx","index.js"],"names":["superagent","superagentPromise","_superagent","global","Promise","API_ROOT","encode","encodeURIComponent","responseBody","res","body","token","tokenPlugin","req","set","requests","url","del","use","then","get","put","post","Auth","current","login","email","password","user","register","username","save","Tags","getAll","limit","count","p","omitSlug","article","Object","assign","slug","undefined","Articles","all","page","byAuthor","author","byTag","tag","favorite","favoritedBy","feed","unfavorite","update","create","Comments","comment","delete","commentId","forArticle","Profile","follow","unfollow","setToken","_token","state","action","type","tags","payload","createRootReducer","history","combineReducers","home","router","connectRouter","promiseMiddleware","store","next","v","dispatch","subtype","currentView","getState","viewChangeCounter","skipTracking","currentState","console","log","promise","error","response","localStorageMiddleware","window","localStorage","setItem","agent","History","createBrowserHistory","navRouter","routerMiddleware","preloadedState","Root","Component","Store","createStore","compose","applyMiddleware","logger","ReactDOM","render","path","document","getElementById"],"mappings":"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","file":"static/js/main.29c6b185.chunk.js","sourcesContent":["import superagentPromise from 'superagent-promise';\nimport _superagent from 'superagent';\n\nconst superagent = superagentPromise(_superagent, global.Promise);\n\nconst API_ROOT = 'https://plutonusdev.github.io/Portfolio/api';\n\nconst encode = encodeURIComponent;\nconst responseBody = (res) => res.body;\n\nlet token = null;\nconst tokenPlugin = (req) => {\n  if (token) {\n    req.set('authorization', `Token ${token}`);\n  }\n};\n\nconst requests = {\n  del: (url) =>\n    superagent.del(`${API_ROOT}${url}`)\n        .use(tokenPlugin).then(responseBody),\n  get: (url) =>\n    superagent.get(`${API_ROOT}${url}`)\n        .use(tokenPlugin).then(responseBody),\n  put: (url, body) =>\n    superagent.put(`${API_ROOT}${url}`, body)\n        .use(tokenPlugin).then(responseBody),\n  post: (url, body) =>\n    superagent.post(`${API_ROOT}${url}`, body)\n        .use(tokenPlugin).then(responseBody),\n};\n\nconst Auth = {\n  current: () =>\n    requests.get('/user'),\n  login: (email, password) =>\n    requests.post('/users/login', {user: {email, password}}),\n  register: (username, email, password) =>\n    requests.post('/users', {user: {username, email, password}}),\n  save: (user) =>\n    requests.put('/user', {user}),\n};\n\nconst Tags = {\n  getAll: () => requests.get('/tags'),\n};\n\nconst limit = (count, p) => `limit=${count}&offset=${p ? p * count : 0}`;\nconst omitSlug = (article) => Object.assign({}, article, {slug: undefined});\nconst Articles = {\n  all: (page) =>\n    requests.get(`/articles?${limit(10, page)}`),\n  byAuthor: (author, page) =>\n    requests.get(`/articles?author=${encode(author)}&${limit(5, page)}`),\n  byTag: (tag, page) =>\n    requests.get(`/articles?tag=${encode(tag)}&${limit(10, page)}`),\n  del: (slug) =>\n    requests.del(`/articles/${slug}`),\n  favorite: (slug) =>\n    requests.post(`/articles/${slug}/favorite`),\n  favoritedBy: (author, page) =>\n    requests.get(`/articles?favorited=${encode(author)}&${limit(5, page)}`),\n  feed: () =>\n    requests.get('/articles/feed?limit=10&offset=0'),\n  get: (slug) =>\n    requests.get(`/articles/${slug}`),\n  unfavorite: (slug) =>\n    requests.del(`/articles/${slug}/favorite`),\n  update: (article) =>\n    requests.put(`/articles/${article.slug}`, {article: omitSlug(article)}),\n  create: (article) =>\n    requests.post('/articles', {article}),\n};\n\nconst Comments = {\n  create: (slug, comment) =>\n    requests.post(`/articles/${slug}/comments`, {comment}),\n  delete: (slug, commentId) =>\n    requests.del(`/articles/${slug}/comments/${commentId}`),\n  forArticle: (slug) =>\n    requests.get(`/articles/${slug}/comments`),\n};\n\nconst Profile = {\n  follow: (username) =>\n    requests.post(`/profiles/${username}/follow`),\n  get: (username) =>\n    requests.get(`/profiles/${username}`),\n  unfollow: (username) =>\n    requests.del(`/profiles/${username}/follow`),\n};\n\nexport default {\n  Articles,\n  Auth,\n  Comments,\n  Profile,\n  Tags,\n  setToken: (_token) => {\n    token = _token;\n  },\n};\n","import {HOME_PAGE_LOADED, HOME_PAGE_UNLOADED} from '../constants/actionTypes';\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case HOME_PAGE_LOADED:\n      return {\n        ...state,\n        tags: action.payload[0].tags,\n      };\n    case HOME_PAGE_UNLOADED:\n      return {};\n    default:\n      return state;\n  }\n};\n","export const APP_LOAD = 'APP_LOAD';\nexport const REDIRECT = 'REDIRECT';\nexport const HOME_PAGE_LOADED = 'HOME_PAGE_LOADED';\nexport const HOME_PAGE_UNLOADED = 'HOME_PAGE_UNLOADED';\n\nexport const ASYNC_START = 'ASYNC_START';\nexport const ASYNC_END = 'ASYNC_END';\n","import home from './reducers/home';\n\nimport {combineReducers} from 'redux';\nimport {connectRouter} from 'connected-react-router';\n\nconst createRootReducer = (history) => combineReducers({\n  home,\n  router: connectRouter(history),\n});\n\nexport default createRootReducer;\n","import agent from './agent';\nimport {ASYNC_START, ASYNC_END} from './constants/actionTypes';\n\nconst promiseMiddleware = (store) => (next) => (action) => {\n  if (isPromise(action.payload)) {\n    store.dispatch({type: ASYNC_START, subtype: action.type});\n\n    const currentView = store.getState().viewChangeCounter;\n    const skipTracking = action.skipTracking;\n\n    action.payload.then((res) => {\n      const currentState = store.getState();\n      if (!skipTracking &&\n        currentState.viewChangeCounter !== currentView) return;\n      console.log(`RESULT: ${res}`);\n      action.payload = res;\n      store.dispatch({type: ASYNC_END, promise: action.payload});\n      store.dispatch(action);\n    },\n    (error) => {\n      const currentState = store.getState();\n      if (!skipTracking && currentState.viewChangeCounter !== currentView) {\n        return;\n      }\n      console.log('ERROR', error);\n      action.error = true;\n      action.payload = error.response.body;\n      if (!action.skipTracking) {\n        store.dispatch({type: ASYNC_END, promise: action.payload});\n      }\n      store.dispatch(action);\n    },\n    );\n\n    return;\n  }\n\n  next(action);\n};\n\nconst localStorageMiddleware = (store) => (next) => (action) => {\n  window.localStorage.setItem('jwt', '');\n  agent.setToken(null);\n\n  next(action);\n};\n\nfunction isPromise(v) {\n  return v && typeof v.then === 'function';\n}\n\n\nexport {promiseMiddleware, localStorageMiddleware};\n","import {applyMiddleware, compose, createStore} from 'redux';\nimport {logger} from 'redux-logger';\nimport createRootReducer from './reducer';\nimport {promiseMiddleware, localStorageMiddleware} from './middleware';\n\nimport {routerMiddleware} from 'connected-react-router';\nimport {createBrowserHistory} from 'history';\n\nexport const History = createBrowserHistory();\nconst navRouter = routerMiddleware(History);\n\nexport default function configureStore(preloadedState) {\n  const store = createStore(\n      createRootReducer(History),\n      preloadedState,\n      compose(\n          applyMiddleware(\n              navRouter,\n              promiseMiddleware,\n              localStorageMiddleware,\n              logger,\n          ),\n      ),\n  );\n\n  return store;\n}\n","import React, { Component } from 'react';\r\n\r\nclass Root extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<h1>Hello world!</h1>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Root;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\n\nimport configureStore, {History} from './store';\n\nimport {Route, Switch} from 'react-router-dom';\nimport {ConnectedRouter} from 'connected-react-router';\n\nimport Root from './components/root';\n\nconst Store = configureStore();\n\nReactDOM.render((\n  <Provider store={Store}>\n    <ConnectedRouter history={History}>\n      <Switch>\n        <Route path=\"/\" render={() => (<Root />)} />\n      </Switch>\n    </ConnectedRouter>\n  </Provider>\n), document.getElementById('root'));\n"],"sourceRoot":""}